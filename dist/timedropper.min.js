/**
 * timedropper-ex
 * @version v1.4.4
 * @link https://adam5wu.github.io/TimeDropper-Ex/
 * @license MIT
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery","moment"],e):"object"==typeof module&&module.exports?module.exports=e(require("jquery"),require("moment")):e(jQuery,moment)}(function(e){"use strict";e.TDExLang=e.extend({"default":"en",en:{am:"AM",pm:"PM",reset:"Reset"}},e.TDExLang),e.fn.timeDropper=function(t){function a(){var a=r(j.locale),n=a[0];j.fblocalizer=a[1];var i=j.locale;if(t.language)t.language in e.TDExLang&&(i=t.language);else{var l=navigator.languages||navigator.userLanguage||(navigator.language?[navigator.language]:[navigator.browserLanguage]);for(var o in l){var d=l[o].toLowerCase();if(d in e.TDExLang){i=d;break}}}a=r(i),j.locale=a[0],j.localizer=a[1];var s=j.formatter.locale();t.language&&j.formatter.locale(t.language).locale()===t.language||j.formatter.locale(j.locale).locale()!==j.locale&&j.formatter.locale(i).locale()!==i&&j.formatter.locale(n).locale()!==n&&j.formatter.locale(s),j.formatter.utc().startOf("day"),j.wrapper=H(e(".td-clock").length),(t.container||e("body")).append(j.wrapper),j.el.lancet=j.wrapper.find(".td-lancette"),j.el.lancet_ptr=j.wrapper.find(".td-pointer"),j.el.lancet_hr=j.el.lancet.find(".td-hr"),j.el.lancet_min=j.el.lancet.find(".td-min"),j.el.hr=j.wrapper.find(".td-hr"),j.el.min=j.wrapper.find(".td-min"),j.el.dail=j.wrapper.find(".td-dail"),j.el.dail_handle=j.el.dail.find(".td-handle"),j.el.dail_rail=j.el.dail.find("svg"),j.el.medirian=j.wrapper.find(".td-medirian"),j.el.medirian_spans=j.el.medirian.find("span"),j.el.medirian_am=j.el.medirian.find(".td-am"),j.el.medirian_pm=j.el.medirian.find(".td-pm"),j.el.medirian_now=j.el.medirian.find(".td-now"),j.el.time=j.wrapper.find(".td-time"),j.el.time_spans=j.el.time.find("span"),j.el.time_hr=j.el.time.find(".td-hr"),j.el.time_min=j.el.time.find(".td-min"),t.showLancets||j.el.lancet.css("display","none"),t.dropTrigger||j.wrapper.addClass("nodrop"),j.wrapper.attr("unselectable","on").css("user-select","none").bind("selectstart",function(e){return e.preventDefault(),!1}),j.el.time_spans.on("click",h),t.alwaysOpen||j.wrapper.on("click",f),t.meridians&&(j.el.medirian_am.on("click",p),j.el.medirian_pm.on("click",p),j.el.medirian_now.on("click",g)),j.el.dail_rail.on("touchstart mousedown",v),t.mousewheel&&j.wrapper.on("mousewheel",k)}function n(e){if(!j.wrapper){if(void 0!==j.wrapper)throw new Error("Already destroyed");if(e)throw new Error("Not yet initialized")}}function r(t){for(var a=e.TDExLang[t];a.constructor===String;)t=a,a=e.TDExLang[a];return[t,a]}function i(e){return j.localizer[e]||j.fblocalizer[e]||"??"}function l(e){return e<10?"0"+e:e}function o(e){var a=e&&e.constructor==String?e.trim():void 0;if(a){var n=moment(a,t.format,j.formatter.locale(),!0);a=n.isValid()?n.utc().toDate():void 0}return a}function d(e,a,n){return j.formatter.hour(e).minute(a).second(n),j.formatter.format(t.format)}function s(e,a){var n=j.time!=e;if(!a&&j.followTime&&(clearInterval(j.followTime),j.followTime=null,j.el.medirian_now.addClass("td-on"),n=!0),n){j.time=e%86400,j.time<0&&(j.time+=86400);var r=Math.floor(j.time/3600),i=j.time%3600,o=Math.floor(i/60),s=360*i/3600,c=360*r/12;j.h_deg=c%360+s/12,j.m_deg=s,j.pm=r>=12,j.el.lancet_hr.css("transform","rotate("+j.h_deg+"deg)"),j.el.lancet_min.css("transform","rotate("+j.m_deg+"deg)"),j.el.lancet_hr.css("-webkit-transform","rotate("+j.h_deg+"deg)"),j.el.lancet_min.css("-webkit-transform","rotate("+j.m_deg+"deg)"),j.el.time_hr.attr("data-id",r).text(l(t.meridians&&r>12?r-12:r)),j.el.time_min.attr("data-id",o).text(l(o)),t.meridians&&(j.pm?(j.el.medirian_am.removeClass("td-on"),j.el.medirian_pm.addClass("td-on")):(j.el.medirian_am.addClass("td-on"),j.el.medirian_pm.removeClass("td-on"))),j.selector&&(j.selector.hasClass("td-hr")?(j.el.dail.css("transform","rotate("+j.h_deg+"deg)"),j.el.dail.css("-webkit-transform","rotate("+j.h_deg+"deg)")):(j.el.dail.css("transform","rotate("+j.m_deg+"deg)"),j.el.dail.css("-webkit-transform","rotate("+j.m_deg+"deg)")));var m=d(r,o,i%60);t.putTime.call(j.anchor[0],m),j.anchor.trigger("TDEx-update",{dailing:j.dailing,selector:j.selector?j.selector.hasClass("td-hr")?"hr":"min":null,now:a,time:[j.time,m]})}}function c(e){var a=j.time%3600,n=Math.round(3600*e/360);if(t.stickyMinute>1){var r=n%60,i=60-r;if((r<t.stickyMinute||i<t.stickyMinute)&&(n=(n-r+(r<t.stickyMinute?0:60))%3600,e=360*n/3600),e==j.m_deg)return}var l=e>j.m_deg?e-j.m_deg:j.m_deg-e,o=l<=180?0:e<j.m_deg?3600:-3600;s(j.time-a+n+o)}function m(e){var a=j.time%43200,n=Math.round(3600*e*12/360);if(t.stickyHour>1){var r=n%3600,i=3600-r;if((r<t.stickyHour||i<t.stickyHour)&&(n=(n-r+(r<t.stickyHour?0:3600))%43200,e=360*n/43200),e==j.h_deg)return}var l=e>j.h_deg?e-j.h_deg:j.h_deg-e,o=l<=180?0:e<j.h_deg?43200:-43200;s(j.time-a+n+o)}function u(e){j.selector=e,j.selector?(j.selector.hasClass("td-hr")?(j.el.hr.addClass("td-on"),j.el.min.removeClass("td-on"),j.select_deg=j.h_deg):(j.el.hr.removeClass("td-on"),j.el.min.addClass("td-on"),j.select_deg=j.m_deg),j.el.dail.addClass("td-n"),j.el.dail.addClass("active"),j.el.dail.css("transform","rotate("+j.select_deg+"deg)"),j.el.dail.css("-webkit-transform","rotate("+j.select_deg+"deg)")):(j.el.hr.removeClass("td-on"),j.el.min.removeClass("td-on"),j.el.dail.removeClass("active")),j.anchor.trigger("TDEx-selector",{selector:j.selector?j.selector.hasClass("td-hr")?"hr":"min":null})}function h(t){u(e(this)),j.dailDelay&&clearTimeout(j.dailDelay),j.dailDelay=setTimeout(function(){j.dailDelay=null},100)}function f(e){null==j.dailDelay&&u(null)}function p(e){j.anchor.trigger("TDEx-meridian",{clicked:j.pm?"am":"pm"}),s(j.pm?j.time-43200:j.time+43200)}function g(e){j.anchor.trigger("TDEx-meridian",{clicked:"now"}),y(null)}function v(t){if(j.selector){t.preventDefault(),j.anchor.trigger("TDEx-dailing",{finish:!1,selector:j.selector.hasClass("td-hr")?"hr":"min"}),j.handleShake&&(clearInterval(j.handleShake),j.handleShake=null),j.el.dail.removeClass("td-n"),j.el.dail_handle.removeClass("td-bounce"),j.el.dail_handle.addClass("td-drag"),j.dailing=!0;var a=j.wrapper.offset();j.center={y:a.top+j.wrapper.height()/2,x:a.left+j.wrapper.width()/2};var n="touchstart"==t.type?t.originalEvent.touches[0]:t,r=j.center.y-n.pageY,i=j.center.x-n.pageX,l=Math.atan2(r,i)*j.rad2deg;j.init_deg=l<0?360+l:l,e(window).on("touchmove mousemove",w),e(window).on("touchend mouseup",_)}}function w(e){e.preventDefault();var t="touchmove"==e.type?e.originalEvent.touches[0]:e,a=j.center.y-t.pageY,n=j.center.x-t.pageX,r=Math.atan2(a,n)*j.rad2deg;r<0&&(r=360+r);var i=r-j.init_deg+j.select_deg;i<0?i=360+i:i>360&&(i-=360),j.selector.hasClass("td-hr")?m(i):c(i)}function _(a){a.preventDefault(),j.dailing=!1,j.dailDelay&&clearTimeout(j.dailDelay),j.dailDelay=setTimeout(function(){j.dailDelay=null},100),t.autoSwitch&&u(j.selector.hasClass("td-hr")?j.el.time_min:j.el.time_hr),j.el.dail.addClass("td-n"),j.el.dail_handle.addClass("td-bounce"),j.el.dail_handle.removeClass("td-drag"),e(window).off("touchmove mousemove",w),e(window).off("touchend mouseup",_),j.anchor.trigger("TDEx-dailing",{finish:!0,selector:j.selector.hasClass("td-hr")?"hr":"min"})}function k(e){j.selector&&(e.preventDefault(),e.stopPropagation(),j.handleShake&&(clearInterval(j.handleShake),j.handleShake=null),j.dailing||(j.el.dail.removeClass("td-n"),j.select_deg+=e.originalEvent.wheelDelta/120,j.select_deg<0?j.select_deg=360+j.select_deg:j.select_deg>360&&(j.select_deg=j.select_deg-360),j.selector.hasClass("td-hr")?m(j.select_deg):c(j.select_deg)))}function y(e){var t;if(e||0===e)j.followTime&&(clearInterval(j.followTime),j.followTime=null,j.el.medirian_now.addClass("td-on")),t=e instanceof Date?3600*e.getHours()+60*e.getMinutes()+e.getSeconds():e;else{if(j.followTime)return;j.followTime=setInterval(function(){a=new Date,t=3600*a.getHours()+60*a.getMinutes()+a.getSeconds(),s(t,!0)},500),j.el.medirian_now.removeClass("td-on");var a=new Date;t=3600*a.getHours()+60*a.getMinutes()+a.getSeconds()}t!=j.time&&(j.el.lancet_ptr.addClass("td-n"),s(t,null!==j.followTime),j.anchor.trigger("TDEx-reset",{sourceTime:e}),setTimeout(function(){j.el.lancet_ptr.removeClass("td-n")},500))}function T(){var t=j.anchor.offset(),a=j.anchor.outerWidth(),n=j.anchor.outerHeight();t.right=t.left+a,t.bottom=t.top+n;var r=j.wrapper.offset(),i=j.wrapper.outerWidth(),l=j.wrapper.outerHeight();r.right=r.left+i,r.bottom=r.top+l;var o={top:e(window).scrollTop(),left:e(window).scrollLeft()},d=e(window).width(),s=e(window).height();o.right=o.left+d,o.bottom=o.top+s;var c=Math.round(t.left+(a-i)/2);if(r.left==c&&r.top>=o.top&&r.bottom<=o.bottom&&(r.top==t.bottom||r.bottom==t.top))return!1;var m,u=t.bottom+l<=o.bottom||t.top-l<o.top;if(u){var h=Math.max(t.bottom,o.top);j.wrapper.removeClass("drop-up").css({top:h,bottom:"auto",left:c}),m=h-t.bottom}else{var f=e("body").outerHeight(),p=Math.min(t.top,o.bottom);j.wrapper.addClass("drop-up").css({top:"auto",bottom:f-p,left:c}),m=t.top-p}return j.wrapper.css({opacity:.3+.7/Math.log2(2+(m>>7))}),!0}function C(e){T()}function x(n){if(!j.active){switch(j.wrapper||a(),j.active=!0,j.wrapper.addClass("td-show").removeClass("td-"+t.animation+"out"),t.alwaysOpen||j.wrapper.addClass("td-"+t.animation+"in"),t.handleShake&&(j.handleShake=setInterval(function(){j.el.dail_handle.addClass("td-alert"),setTimeout(function(){j.el.dail_handle.removeClass("td-alert")},1e3)},2e3)),y(n||o(t.fetchTime.call(j.anchor[0]))),t.startFrom){case"hr":u(j.el.time_hr);break;case"min":u(j.el.time_min)}return t.container||(T(),e(window).on("resize scroll",C)),t.watchValueChange&&j.anchor.on("input",M),e(document).on("click",t.alwaysOpen?f:E),j.anchor.trigger("TDEx-show",{}),!0}return!1}function D(){return!(t.alwaysOpen||!j.active)&&(j.active=!1,j.followTime&&(clearInterval(j.followTime),j.followTime=null,j.el.medirian_now.addClass("td-on")),j.handleShake&&(clearInterval(j.handleShake),j.handleShake=null),t.container||(e(window).off("resize",C),e(window).off("scroll",C)),t.watchValueChange&&j.anchor.off("input",M),e(document).off("click",E),setTimeout(function(){u(null),j.wrapper.removeClass("td-show"),j.anchor.trigger("TDEx-hide",{})},700),j.wrapper.addClass("td-"+t.animation+"out").removeClass("td-"+t.animation+"in"),!0)}function b(e,t){return t.contains(e.target)||e.target==t}function M(e){clearTimeout(j.valueChange),j.valueChange=setTimeout(function(){j.valueChange=null;var e=o(t.fetchTime.call(j.anchor[0]));e&&y(e)},200)}function S(e){x()}function E(e){b(e,j.anchor[0])||b(e,j.wrapper[0])||D()}function L(t,a,n){var r="<"+t;return a&&(e.each(a,function(e,t){t.constructor==Array&&(t=t.reduce(function(e,t){return(e||"")+(t?" "+t:"")})),r+=" "+e+'="'+t+'"'}),void 0!==n&&(r+=n?">"+n+"</"+t:"/")),r+">"}function H(a){var n=L("div",{"class":["td-clock",t.inline?"inline":""],id:"td-clock-"+a})+L("div",{"class":"td-clock-wrap"})+L("div",{"class":"td-medirian"},L("span",{"class":["td-am","td-n2"]},i("am"))+L("span",{"class":["td-pm","td-n2"]},i("pm"))+L("span",{"class":["td-now","td-n2","td-on"]},i("reset")))+L("div",{"class":"td-lancette"},L("div",{"class":["td-tick","td-rotate-0"]},"")+L("div",{"class":["td-tick","td-rotate-30"]},"")+L("div",{"class":["td-tick","td-rotate-60"]},"")+L("div",{"class":["td-tick","td-rotate-90"]},"")+L("div",{"class":["td-tick","td-rotate-120"]},"")+L("div",{"class":["td-tick","td-rotate-150"]},"")+L("div",{"class":["td-tick","td-rotate-180"]},"")+L("div",{"class":["td-tick","td-rotate-210"]},"")+L("div",{"class":["td-tick","td-rotate-240"]},"")+L("div",{"class":["td-tick","td-rotate-270"]},"")+L("div",{"class":["td-tick","td-rotate-300"]},"")+L("div",{"class":["td-tick","td-rotate-330"]},"")+L("div",{"class":["td-pointer","td-hr"]},"")+L("div",{"class":["td-pointer","td-min"]},""))+L("div",{"class":"td-time"},L("span",{"class":["td-hr","td-n2"]},"")+":"+L("span",{"class":["td-min","td-n2"]},""))+L("div",{"class":["td-dail","td-n"]})+L("div",{"class":"td-handle"},L("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink","xml:space":"preserve",version:"1.1",x:"0px",y:"0px",viewBox:"0 0 100 35.4","enable-background":"new 0 0 100 35.4"},L("g",{},L("path",{fill:"none","stroke-width":1.2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10,d:"M98.1,33C85.4,21.5,68.5,14.5,50,14.5S14.6,21.5,1.9,33"},"")+L("line",{fill:"none","stroke-width":1.2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10,x1:1.9,y1:33,x2:1.9,y2:28.6},"")+L("line",{fill:"none","stroke-width":1.2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10,x1:1.9,y1:33,x2:6.3,y2:33},"")+L("line",{fill:"none","stroke-width":1.2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10,x1:98.1,y1:33,x2:93.7,y2:33},"")+L("line",{fill:"none","stroke-width":1.2,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10,x1:98.1,y1:33,x2:98.1,y2:28.6},""))))+L("/div")+L("/div")+L("/div");return e(n)}t=e.extend({inline:!1,autoStart:!1,alwaysOpen:!1,dropTrigger:!0,watchValueChange:!0,format:"hh:mm A",language:void 0,fetchTime:function(){return e(this).val()},putTime:function(t){t!=e(this).val()&&e(this).val(t).change()},autoSwitch:!0,meridians:!0,mousewheel:!0,showLancets:!0,animation:"drop",container:void 0,startFrom:"hr",handleShake:!1,stickyMinute:20,stickyHour:480},t),t.alwaysOpen&&(t.autoStart=!0,t.dropTrigger=!1);var j={anchor:e(this),wrapper:void 0,el:{},locale:"default",localizer:{},fblocalizer:{},formatter:moment(),monthFormat:"??",dailing:!1,handleShake:null,followTime:null,dailDelay:null,selector:null,time:0,h_deg:0,m_deg:0,pm:!1,select_deg:0,init_deg:void 0,rad2deg:180/Math.PI,center:void 0,active:!1};return j.anchor.data("TDEx",{show:function(e){return n(),x(e)},hide:function(){return n(),D()},select:function(e){switch(n(!0),e){case"hr":u(j.el.time_hr);break;case"min":u(j.el.time_min);break;default:u(null)}},getTime:function(){n(!0);var e=Math.floor(j.time/3600),t=j.time%3600,a=Math.floor(t/60);return[j.time,d(e,a,t%60)]},isActive:function(){return n(),j.active},isDailing:function(){return n(),j.dailing},setTime:function(e,t){return y(e),t||u(null),e},setTimeText:function(e){n(!0);var t=o(e);return t?s(t):t},wrapper:function(){return n(!0),j.wrapper},anchor:function(){return n(),j.anchor},destroy:function(){n(),j.anchor.trigger("TDEx-destroy",{}),j.anchor.off("click",S),j.anchor.data("TDEx",void 0),j.wrapper&&j.wrapper.remove(),j.wrapper=null,e(document).off("click",E),e(document).off("click",f)}}),t.dropTrigger&&j.anchor.on("click",S),t.autoStart&&setTimeout(x.bind(this),0),this}});